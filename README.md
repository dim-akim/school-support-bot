# Бот Технической поддержки Вальдорфской школы имени А. А. Пинского

Позволяет создавать, принимать и закрывать заявки в Службу технической поддержки школы.

В качестве базы данных используется Google-таблица, как наиболее доступный в школьных реалиях интерфейс, к которому
с минимальными усилиями можно подключить и другие службы школы, например, хозяйственную.

При первом обращении пользователь проходит процедуру регистрации, которая сводится к подтверждению роли пользователя
`Суперадмином`. 
Его `Telegram ID` и `username` нужно задать в переменных окружения `SUPERUSER_ID` и `SUPERUSER_USERNAME`. 

## Доступные команды
### Учителю
- `/tasks` - Начать диалог, который поможет составить заявку в Техподдержку
- `/exit` - Остановить диалог на любом этапе
- `/help` - Справка по всем доступным командам

### Админу
- `/tasks` - Дополнительно есть возможность просмотреть задачи, принятые админом в исполнение
- `/cartridge` - Начать диалог по фиксации замены картриджа в Google-таблице `Реестр принтеров`

## TODO
### Рефакторинг
- Структурировать класс `Config`
- Оптимизировать декораторы `admin_access` и `authorize`
- Вынести роли в словари или константы
- Вынести в отдельную функцию отправку сообщения в Telegram
- Вынести в модуль `keyboards` создание всех клавиатур
- Вынести текст сообщений в шаблоны `Jinja`
- Описать деплой бота в `README`
- Цветное логирование
- Сделать кастомный объект `CallbackContext` со всеми встроенными словарями

### Функционал
- **Админу:** просмотр не взятых задач
- **Суперадмину:** просмотр задач по любым критериям (исполнители, статус и т.п.)
- **Учителю:** вернуть задачу в работу
- Оставить комментарий к заявке
- **Суперадмину:** просмотр и изменение ролей пользователя

## Идеи
- Запрос и отправка дополнительной информации к задаче
- **Админу:** Сгенерировать версии Таблицы успеваемости без права редактирования по классам
- **Новая роль:** Классный руководитель
- Получение Классным руководителем версии Таблицы успеваемости для класса без права редактирования
- Получение ссылки на Таблицу успеваемости за 1-2-3 триместр
- Получение расписания класса на день и на неделю (с кабинетами?)
- Получение расписания учителя на день и на неделю (с кабинетами?)
- Дополнительные роли для подключения Хозяйственной службы
